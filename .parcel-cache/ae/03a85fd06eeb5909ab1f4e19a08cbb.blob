var _modes = require('../modes');
syncBtnText();
handleUserThemeChanges();
function syncBtnText() {
  const toggleModeBtn = document.querySelector('.toggle-mode-btn');
  if (!toggleModeBtn) return;
  const initPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  const initPrefersLight = window.matchMedia('(prefers-color-scheme: light)').matches;
  if (initPrefersDark) {
    toggleModeBtn.innerHTML = 'DARK';
  }
  if (initPrefersLight) {
    toggleModeBtn.innerHTML = 'LIGHT';
  }
}
function handleUserThemeChanges() {
  const toggleModeBtn = document.querySelector('.toggle-mode-btn');
  if (!toggleModeBtn) return;
  toggleModeBtn.addEventListener('click', handleToggle);
  const themesArr = ['LIGHT', 'DARK', 'LIGHT SERIF', 'DARK SERIF', 'LIGHT VAPORWAVE', 'DARK VAPORWAVE'];
  async function handleToggle() {
    const themeText = toggleModeBtn.innerHTML;
    console.log(`themeText`, themeText);
    const themeIndex = themesArr.indexOf(themeText.trim());
    const nextText = themesArr[themeIndex + 1];
    console.log(`nextText`, nextText);
    // import dynamic theme
    if (nextText === 'LIGHT SERIF' || nextText === 'DARK SERIF') {
      await require('../themes/serif');
    }
    if (nextText === 'LIGHT VAPORWAVE' || nextText === 'DARK VAPORWAVE') {
      await require('../themes/vaporwave');
    }
    if (nextText === 'LIGHT' || nextText === 'DARK') {
      console.log(`reset`);
    }
    if (toggleModeBtn.innerHTML.includes('DARK')) {
      _modes.setLightMode(nextText);
      return;
    }
    if (toggleModeBtn.innerHTML.includes('LIGHT')) {
      _modes.setDarkMode(nextText);
      return;
    }
  }
}
